---
title: Deriving type classes in Haskell is slow
---

``` haskell
{-# LANGUAGE CPP #-}

data Mark = Mark
  { markValue :: String
  , markFrame :: Word
  } deriving (CLASSES)
```

``` shell
$ ghc-8.2.1 -DCLASSES='' -fforce-recomp Deriving.hs
```

``` shell
$ ghc-7.0.1 -DCLASSES='' -fforce-recomp Deriving.hs
```

``` shell
$ ghc-8.2.1 -DCLASSES='Data, Eq, Ord, Read, Show, Typeable' -fforce-recomp Deriving.hs
```

<https://gist.github.com/tfausak/0c90ed1b450ae84136c110f026e16bc6/399b4c7669a4ea9bb585fa1169b53ebe00f3e204>

<https://github.com/tfausak/tfausak.github.io/files/1174893/report.zip>

![](/static/images/2017/08/09/deriving-performance.svg)

![](/static/images/2017/08/09/ghc-performance.svg)
